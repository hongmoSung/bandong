<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.ggori.repository.mapper.IReservationMapper">

	<resultMap id="reserMap" type="Reservation">
		<result column="reser_id" property="reserId"/>
		<result column="reser_date" property="reserDate"/>
		<result column="reser_time" property="reserTime"/>
		<result column="care_type" property="careType"/>
		<result column="detail" property="detail"/>
		<result column="reser_name" property="reserName"/>
		<result column="hospital_id" property="hospitalId"/>
		<result column="member_id" property="memberId"/>
	</resultMap>
	
	<select id="myReservation" parameterType="string" resultMap="reserMap">
		select *
		  from reservation
		 where member_id = #{memberId}
	</select>
	
	<select id="hospitalReservation" parameterType="int" resultMap="reserMap">
		select *
		  from reservation
		 where hospital_id = #{hospitalId}
	</select>
	
	<insert id="insertReservation" parameterType="Reservation">
		insert into reservation (
			reser_id,
			reser_date,
			reser_time,
			care_type,
			detail,
			reser_name,
			hospital_id,
			member_id
		) values (
			s_reservation_id.nextval,
			#{reserDate},
			#{reserTime},
			#{careType},
			#{detail},
			#{reserName},
			#{hospital_id},
			#{memberId}
		)
	</insert>
	
	<delete id="deleteReservation" parameterType="int">
		delete
		  from reservation
		 where reser_id = #{reserId} 
	</delete>
	
	<update id="updateReservation" parameterType="Reservation">
		update reservation
		   set reser_date = #{reserDate},
		       reser_time = #{reserTime},
		       care_type = #{careType},
		       detail = #{detail},
		       reser_name = #{reserName}
		 where reser_id = #{reserId}
	</update>

</mapper>